<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‹ç­å€’è®¡æ—¶</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            padding: 30px;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #5a67d8;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #718096;
            font-size: 1.1rem;
        }

        .status-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .status-card:hover {
            transform: translateY(-5px);
        }

        .emoji {
            font-size: 4rem;
            margin-bottom: 15px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .message {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2d3748;
        }

        .time-left {
            font-size: 1.8rem;
            font-weight: 700;
            color: #5a67d8;
            margin-bottom: 20px;
        }

        .progress-container {
            margin: 25px 0;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #718096;
        }

        .progress-bar {
            height: 12px;
            background-color: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #4fd1c5, #5a67d8);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .time-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #718096;
        }

        .settings {
            margin-top: 30px;
        }

        .settings h2 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #4a5568;
            text-align: center;
        }

        .time-inputs {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 15px;
        }

        .input-group {
            flex: 1;
            min-width: 140px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #4a5568;
        }

        input[type="time"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #cbd5e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        input[type="time"]:focus {
            outline: none;
            border-color: #5a67d8;
            box-shadow: 0 0 0 3px rgba(90, 103, 216, 0.2);
        }

        .footer {
            text-align: center;
            margin-top: 25px;
            color: #718096;
            font-size: 0.9rem;
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .emoji {
                font-size: 3rem;
            }

            .message {
                font-size: 1.3rem;
            }

            .time-left {
                font-size: 1.5rem;
            }

            .time-inputs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ä¸‹ç­å€’è®¡æ—¶</h1>
            <p class="subtitle">å®æ—¶è¿½è¸ªæ‚¨çš„å·¥ä½œè¿›åº¦</p>
        </header>

        <main>
            <div class="status-card">
                <div class="emoji" id="emoji">ğŸ˜Š</div>
                <div class="message" id="message">è®¡ç®—ä¸­...</div>
                <div class="time-left" id="time-left">00:00:00</div>

                <div class="progress-container">
                    <div class="progress-info">
                        <span>å·¥ä½œè¿›åº¦</span>
                        <span id="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="time-info">
                        <span id="worked-time">å·²å·¥ä½œ: 0å°æ—¶</span>
                        <span id="remaining-time">å‰©ä½™: 0å°æ—¶</span>
                    </div>
                </div>
            </div>

            <div class="settings">
                <h2>å·¥ä½œæ—¶é—´è®¾ç½®</h2>
                <div class="time-inputs">
                    <div class="input-group">
                        <label for="start-time">ä¸Šç­æ—¶é—´</label>
                        <input type="time" id="start-time" value="09:00">
                    </div>
                    <div class="input-group">
                        <label for="end-time">ä¸‹ç­æ—¶é—´</label>
                        <input type="time" id="end-time" value="18:00">
                    </div>
                    <div class="input-group">
                        <label for="rest-start">åˆä¼‘å¼€å§‹</label>
                        <input type="time" id="rest-start" value="12:00">
                    </div>
                    <div class="input-group">
                        <label for="rest-end">åˆä¼‘ç»“æŸ</label>
                        <input type="time" id="rest-end" value="13:00">
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>Â© 2023 ä¸‹ç­å€’è®¡æ—¶ | ç¥æ‚¨å·¥ä½œæ„‰å¿«ï¼</p>
        </footer>
    </div>

    <script>
        class WorkProgress {
            constructor(startTime = "09:00", endTime = "18:00", restStart = "12:00", restEnd = "13:00") {
                this.startTime = startTime;
                this.endTime = endTime;
                this.restStart = restStart;
                this.restEnd = restEnd;
                this.totalMinutes = this.calculateWorkMinutes();
                this.morningMinutes = this.calculateMorningMinutes();
                this.afternoonMinutes = this.calculateAfternoonMinutes();
            }

            parseTime(timeStr) {
                const [hour, minute] = timeStr.split(":").map(Number);
                return { hour, minute };
            }

            calculateWorkMinutes() {
                const start = this.parseTime(this.startTime);
                const end = this.parseTime(this.endTime);
                const restStart = this.parseTime(this.restStart);
                const restEnd = this.parseTime(this.restEnd);

                const startMinutes = start.hour * 60 + start.minute;
                const endMinutes = end.hour * 60 + end.minute;
                const restStartMinutes = restStart.hour * 60 + restStart.minute;
                const restEndMinutes = restEnd.hour * 60 + restEnd.minute;

                const totalMinutes = endMinutes - startMinutes;
                const restMinutes = restEndMinutes - restStartMinutes;

                return totalMinutes - restMinutes;
            }

            calculateMorningMinutes() {
                const start = this.parseTime(this.startTime);
                const restStart = this.parseTime(this.restStart);

                const startMinutes = start.hour * 60 + start.minute;
                const restStartMinutes = restStart.hour * 60 + restStart.minute;

                return restStartMinutes - startMinutes;
            }

            calculateAfternoonMinutes() {
                const restEnd = this.parseTime(this.restEnd);
                const end = this.parseTime(this.endTime);

                const restEndMinutes = restEnd.hour * 60 + restEnd.minute;
                const endMinutes = end.hour * 60 + end.minute;

                return endMinutes - restEndMinutes;
            }

            getCurrentProgress() {
                const now = new Date();
                const today = now.getDay(); // 0 = Sunday, 6 = Saturday

                // å¦‚æœæ˜¯å‘¨æœ«
                if (today === 0 || today === 6) {
                    return {
                        progress: 100,
                        message: "ä»Šå¤©æ˜¯å‘¨æœ«ï¼Œä¸ç”¨ä¸Šç­ï¼",
                        emoji: "ğŸ‰",
                        timeLeft: "00:00:00",
                        workedMinutes: 0,
                        remainingMinutes: 0
                    };
                }

                const nowMinutes = now.getHours() * 60 + now.getMinutes();
                const start = this.parseTime(this.startTime);
                const end = this.parseTime(this.endTime);
                const restStart = this.parseTime(this.restStart);
                const restEnd = this.parseTime(this.restEnd);

                const startMinutes = start.hour * 60 + start.minute;
                const endMinutes = end.hour * 60 + end.minute;
                const restStartMinutes = restStart.hour * 60 + restStart.minute;
                const restEndMinutes = restEnd.hour * 60 + restEnd.minute;

                // æ£€æŸ¥æ˜¯å¦è¿˜æ²¡åˆ°ä¸Šç­æ—¶é—´
                if (nowMinutes < startMinutes) {
                    const timeLeftMinutes = startMinutes - nowMinutes;
                    const hours = Math.floor(timeLeftMinutes / 60);
                    const minutes = timeLeftMinutes % 60;
                    const seconds = 60 - now.getSeconds();
                    const timeLeftStr = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                    return {
                        progress: 0,
                        message: `ä¸Šç­å€’è®¡æ—¶: ${timeLeftStr}`,
                        emoji: "ğŸ˜´",
                        timeLeft: timeLeftStr,
                        workedMinutes: 0,
                        remainingMinutes: this.totalMinutes
                    };
                }

                // æ£€æŸ¥æ˜¯å¦å·²ç»ä¸‹ç­
                if (nowMinutes >= endMinutes) {
                    return {
                        progress: 100,
                        message: "å·²ç»ä¸‹ç­å•¦ï¼",
                        emoji: "ğŸ‰",
                        timeLeft: "00:00:00",
                        workedMinutes: this.totalMinutes,
                        remainingMinutes: 0
                    };
                }

                // æ£€æŸ¥æ˜¯å¦åœ¨åˆä¼‘æ—¶é—´
                if (nowMinutes >= restStartMinutes && nowMinutes < restEndMinutes) {
                    const timeLeftMinutes = restEndMinutes - nowMinutes;
                    const hours = Math.floor(timeLeftMinutes / 60);
                    const minutes = timeLeftMinutes % 60;
                    const seconds = 60 - now.getSeconds();
                    const timeLeftStr = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                    // åˆä¼‘æœŸé—´è¿›åº¦å›ºå®šä¸ºä¸Šåˆå®Œæˆçš„æ¯”ä¾‹
                    const progress = (this.morningMinutes / this.totalMinutes) * 100;

                    return {
                        progress: progress,
                        message: `åˆä¼‘ä¸­... ${timeLeftStr}`,
                        emoji: "ğŸ½ï¸",
                        timeLeft: timeLeftStr,
                        workedMinutes: this.morningMinutes,
                        remainingMinutes: this.afternoonMinutes
                    };
                }

                // è®¡ç®—å½“å‰è¿›åº¦
                let workedMinutes;
                if (nowMinutes < restStartMinutes) {
                    // ä¸Šåˆå·¥ä½œæ—¶é—´
                    workedMinutes = nowMinutes - startMinutes;
                } else {
                    // ä¸‹åˆå·¥ä½œæ—¶é—´
                    workedMinutes = this.morningMinutes + (nowMinutes - restEndMinutes);
                }

                const progress = Math.min(100, Math.max(0, (workedMinutes / this.totalMinutes) * 100));

                // è®¡ç®—å‰©ä½™æ—¶é—´
                const remainingMinutes = this.totalMinutes - workedMinutes;
                const hours = Math.floor(remainingMinutes / 60);
                const minutes = Math.floor(remainingMinutes % 60);
                const seconds = 60 - now.getSeconds();
                const timeLeftStr = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                // æ ¹æ®è¿›åº¦é€‰æ‹©è¡¨æƒ…
                let emoji;
                if (progress < 30) {
                    emoji = "ğŸ˜Š";
                } else if (progress < 60) {
                    emoji = "ğŸ˜";
                } else if (progress < 80) {
                    emoji = "ğŸ˜…";
                } else {
                    emoji = "ğŸ¤©";
                }

                return {
                    progress,
                    message: `ä¸‹ç­å€’è®¡æ—¶: ${timeLeftStr}`,
                    emoji,
                    timeLeft: timeLeftStr,
                    workedMinutes: workedMinutes,
                    remainingMinutes: remainingMinutes
                };
            }
        }

        // åˆå§‹åŒ–
        let workProgress = new WorkProgress();

        // DOM å…ƒç´ 
        const emojiElement = document.getElementById('emoji');
        const messageElement = document.getElementById('message');
        const timeLeftElement = document.getElementById('time-left');
        const progressPercentElement = document.getElementById('progress-percent');
        const progressFillElement = document.getElementById('progress-fill');
        const workedTimeElement = document.getElementById('worked-time');
        const remainingTimeElement = document.getElementById('remaining-time');

        const startTimeInput = document.getElementById('start-time');
        const endTimeInput = document.getElementById('end-time');
        const restStartInput = document.getElementById('rest-start');
        const restEndInput = document.getElementById('rest-end');

        // æ›´æ–°æ—¶é—´å‡½æ•°
        function updateTime() {
            const result = workProgress.getCurrentProgress();

            emojiElement.textContent = result.emoji;
            messageElement.textContent = result.message;
            timeLeftElement.textContent = result.timeLeft;
            progressPercentElement.textContent = `${result.progress.toFixed(1)}%`;
            progressFillElement.style.width = `${result.progress}%`;

            // æ›´æ–°å·²å·¥ä½œå’Œå‰©ä½™æ—¶é—´
            const workedHours = (result.workedMinutes / 60).toFixed(1);
            const remainingHours = (result.remainingMinutes / 60).toFixed(1);
            workedTimeElement.textContent = `å·²å·¥ä½œ: ${workedHours}å°æ—¶`;
            remainingTimeElement.textContent = `å‰©ä½™: ${remainingHours}å°æ—¶`;
        }

        // åˆå§‹æ›´æ–°
        updateTime();

        // æ¯ç§’æ›´æ–°ä¸€æ¬¡
        setInterval(updateTime, 1000);

        // ç›‘å¬æ—¶é—´è¾“å…¥å˜åŒ–
        [startTimeInput, endTimeInput, restStartInput, restEndInput].forEach(input => {
            input.addEventListener('change', () => {
                workProgress = new WorkProgress(
                    startTimeInput.value,
                    endTimeInput.value,
                    restStartInput.value,
                    restEndInput.value
                );
                updateTime();
            });
        });
    </script>
</body>
</html>